{"version":3,"file":"static/js/823.d0fd3534.chunk.js","mappings":"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","sources":["shared/components/Spinner/Spinner.jsx","shared/api/currency.js","webpack://react-homework-template/./src/modules/AppBar/Currency/Currency.module.scss?4867","shared/utils/localStorage.js","modules/AppBar/Currency/Currency.jsx"],"sourcesContent":["import { Watch, ThreeDots } from 'react-loader-spinner';\nimport { useMediaQuery } from 'react-responsive';\n\nexport const SpinnerClock = () => {\n  const isDesctopMin = useMediaQuery({ query: '(min-width: 1280px)' });\n  const margin = isDesctopMin ? '100px' : '65px';\n\n  return (\n    <Watch\n      height={isDesctopMin ? '120' : '70'}\n      width={isDesctopMin ? '120' : '70'}\n      radius=\"48\"\n      color=\"#ffffff\"\n      ariaLabel=\"watch-loading\"\n      wrapperStyle={{\n        justifyContent: 'center',\n        marginTop: margin,\n      }}\n      visible={true}\n    />\n  );\n};\n\nexport const SpinnerDots = () => {\n  return (\n    <ThreeDots\n      height=\"80\"\n      width=\"80\"\n      radius=\"9\"\n      color=\"#1976d2\"\n      ariaLabel=\"three-dots-loading\"\n      wrapperStyle={{ justifyContent: 'center' }}\n      wrapperClassName=\"\"\n      visible={true}\n    />\n  );\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.monobank.ua/bank/currency';\n\nasync function fetchCurrency() {\n  const response = await axios.get(BASE_URL);\n  return response;\n}\n\nexport default fetchCurrency;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Currency_root__GvO+H\",\"modal-open\":\"Currency_modal-open__3WQ42\",\"hidden-button\":\"Currency_hidden-button__HJKr3\",\"currency\":\"Currency_currency__176L+\",\"td\":\"Currency_td__XyIWp\",\"th\":\"Currency_th__twaoP\",\"table\":\"Currency_table__B9VRR\",\"tr\":\"Currency_tr__piQmW\",\"error\":\"Currency_error__Lpvc1\"};","const getDataFromLocalStorage = (key, initialValue) => {\n  return JSON.parse(localStorage.getItem(key)) || initialValue;\n};\n\nexport default getDataFromLocalStorage;\n","import { useMediaQuery } from 'react-responsive';\nimport { useEffect, useState } from 'react';\nimport { SpinnerClock } from 'shared/components/Spinner/Spinner';\nimport fetchCurrency from 'shared/api/currency';\nimport styles from './Currency.module.scss';\nimport backgroundDesc from '../../../assets/background/currency-table.png';\nimport backgrounTab from '../../../assets/background/bg-tab-curr.png';\nimport getDataFromLocalStorage from 'shared/utils/localStorage';\n\nconst INITIAL_STATE = {\n  currency: [],\n  loader: false,\n  moreThanHour: false,\n  error: false,\n};\nconst currencyFromStorage = getDataFromLocalStorage('currency', []);\nconst prevDate = getDataFromLocalStorage('currencyFetchDate');\nconst moreThanHour = Date.now() - prevDate > 360000;\n\nconst Currency = () => {\n  const [currency, setCurrency] = useState(currencyFromStorage);\n  const [loader, setLoader] = useState(INITIAL_STATE.loader);\n  const [isError, setIsError] = useState(INITIAL_STATE.error);\n\n  useEffect(() => {\n    const getCurrency = async () => {\n      try {\n        if (currencyFromStorage.length > 0 && !moreThanHour) {\n          return;\n        }\n        setLoader(true);\n        const { data } = await fetchCurrency();\n        setLoader(false);\n        setCurrency(data);\n        localStorage.setItem('currency', JSON.stringify(data));\n        localStorage.setItem('currencyFetchDate', JSON.stringify(Date.now()));\n      } catch ({ message }) {\n        setIsError(true);\n        setLoader(false);\n      }\n    };\n    getCurrency();\n  }, []);\n\n  const isTabletOrMobile = useMediaQuery({ query: '(max-width: 1279px)' });\n  if (currency.length === 0) {\n    return;\n  }\n\n  const usd = currency.find(\n    ({ currencyCodeA, currencyCodeB }) =>\n      currencyCodeA === 840 && currencyCodeB === 980\n  );\n\n  const eur = currency.find(\n    ({ currencyCodeA, currencyCodeB }) =>\n      currencyCodeA === 978 && currencyCodeB === 980\n  );\n\n  const bg = isTabletOrMobile\n    ? `url(\"${backgrounTab}\")`\n    : `url(\"${backgroundDesc}\")`;\n  return (\n    <div className={styles.currency} style={{ backgroundImage: bg }}>\n      {loader && <SpinnerClock />}\n      {isError && (\n        <p className={styles.error}>\n          Exchange rate information is not available at the moment, please try\n          again later.\n        </p>\n      )}\n      {!loader && !isError && (\n        <table className={styles.table}>\n          <thead className={styles.thead}>\n            <tr className={styles.tr}>\n              <th className={styles.th}>Currency</th>\n              <th className={styles.th}>Purchase</th>\n              <th className={styles.th}> Sale</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr className={styles.tr}>\n              <td className={styles.td}>USD</td>\n              <td className={styles.td}>{Number(usd.rateBuy).toFixed(2)}</td>\n              <td className={styles.td}>{Number(usd.rateSell).toFixed(2)}</td>\n            </tr>\n            <tr className={styles.tr}>\n              <td className={styles.td}>EUR</td>\n              <td className={styles.td}>{Number(eur.rateBuy).toFixed(2)}</td>\n              <td className={styles.td}>{Number(eur.rateSell).toFixed(2)}</td>\n            </tr>\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default Currency;\n"],"names":["SpinnerClock","isDesctopMin","useMediaQuery","query","margin","height","width","radius","color","ariaLabel","wrapperStyle","justifyContent","marginTop","visible","BASE_URL","fetchCurrency","axios","response","key","initialValue","JSON","parse","localStorage","getItem","INITIAL_STATE","currencyFromStorage","getDataFromLocalStorage","prevDate","moreThanHour","Date","now","useState","currency","setCurrency","loader","setLoader","isError","setIsError","useEffect","getCurrency","length","data","setItem","stringify","message","isTabletOrMobile","usd","find","currencyCodeA","currencyCodeB","eur","bg","backgrounTab","backgroundDesc","className","styles","style","backgroundImage","Number","rateBuy","toFixed","rateSell"],"sourceRoot":""}